(function(f){var m=window.AmazonUIPageJS||window.P,n=m._namespace||m.attributeErrors,a=n?n("AudibleProductContentAssets",""):m;a.guardFatal?a.guardFatal(f)(a,window):a.execute(function(){f(a,window)})})(function(f,m,n){f.when("initPlayerButton","initAllPlayers","ready").execute(function(a){function r(){var h;return function(c,d){if(c!==h&&h!==n){var g=document.getElementById("sample-player-"+h);a.template(g,q.UNAVAILABLE)}g=document.getElementById("sample-player-"+c);a.template(g,q[d]);h=c}}function k(a){a=
a.getAttribute("data-trigger");if(!a)return null;a=a.split("-");return 3>a.length?null:a[2]}function l(a,c){return function(d){d.preventDefault();if(d=k(a))return c.onPlaySampleClicked(d),!1}}function g(a,c){[].forEach.call(a,function(a){var h=a.cloneNode(!0);a.parentNode.replaceChild(h,a);h.addEventListener("click",l(a,c))})}function f(a){var c={products:[]};[].forEach.call(a,function(a){var h=k(a);a=(a=a.querySelector("button"))?a.getAttribute("data-mp3"):void 0;if(h&&a){var b={};b.asin=h;b.sample_url=
a;c.products.push(b)}});return JSON.stringify(c)}var q={PAUSED:"pause",PLAYING:"play",BUFFERING:"load",ERROR:"reset",UNAVAILABLE:"reset"};(function(){var a;a:{a=["MobileJavaScriptBridge","AndroidJavaScriptBridge"];for(var c=0;c<a.length;++c){var d=a[c];if(m[d]){a=m[d];break a}}a=null}a&&"function"===typeof a.onPlaySampleClicked&&"function"===typeof a.onPlaySampleReady&&(c=document.querySelectorAll(".bc-trigger-playerbutton"),g(c,a),a.onPlaySampleStateChanged=r(),a.onPlaySampleReady(f(c)))})()});f.when("AudiblejQuery",
"expanders","processing","modal","button","lazyload","refMarkers","ready").execute(function(a,r,k,l,g,n,q){function h(){a(".reportInappropriateLink").click(function(){var b=a("#modalReportSubmitButton");b.find(".votingButtonData").remove();var c=a(this).find(".votingButtonData").clone();b.append(c)})}function c(){a(".reviewVoteOptions").click(function(){var b=a(this).find(".votingButtonData"),c=b.data("review-id"),e=b.data("vote"),p=b.data("csrf-token"),b=b.data("asin");a.ajax({url:"/pd/review/vote",
data:{review:c,vote:e,csrfToken:p,asin:b},dataType:"json"}).done(function(b){b.success?(a("#reviewVoteButtons"+c).addClass("bc-pub-hidden"),"inappropriate"===e?a("#reviewReportSuccess"+c).removeClass("bc-pub-hidden"):a("#reviewVoteSuccess"+c).removeClass("bc-pub-hidden")):a("#reviewVoteFailure"+c).removeClass("bc-pub-hidden")}).fail(function(){a("#reviewVoteFailure"+c).removeClass("bc-pub-hidden")})})}function d(){a(".showMoreReviewsButton").click(function(){var b=this;if(!b.classList.contains("bc-button-disabled")){g.disable(b);
var u=k(b);u.activate();var e=a(".globalReviewsTabs").filter("[aria-selected\x3dtrue]").attr("id"),p=a("#reviewsAsin"+e).val(),v=a("#reviewSort"+e).val(),w=a("#reviewFilter"+e).val(),f=a("#nextReviewsPageNumber"+e).val();a.ajax({url:"/pd/reviews",data:{country:e,asin:p,sort:v,filter:w,page:f}}).done(function(b){a("#pagingButtons"+e).replaceWith(b);document.querySelectorAll("."+e+"reviews"+f).forEach(function(a){l.init(a)});document.querySelectorAll(".mobile"+e+"reviews"+f).forEach(function(a){l.init(a);
r.init(a)});d();h();c()}).always(function(){u.deactivate();g.enable(b)})}})}function t(){a(".showMoreListenerReviews").click(function(){var b=this;if(!b.classList.contains("bc-button-disabled")){g.disable(b);var d=k(b);d.activate();var e=a("#reviewerId").val(),p=a("#nextReviewsPageNumber").val();a.ajax({url:"/listener/reviews",data:{customerId:e,page:p}}).done(function(b){a("#showMore").replaceWith(b);document.querySelectorAll(".listenerReviews"+p).forEach(function(a){l.init(a)});n(document,".bc-lazy-load");
f.when("popoverInit").execute(function(a){a.removeEvents();a.init();a.addEvents()});document.querySelectorAll(".mobileListenerReviews"+p).forEach(function(a){l.init(a);r.init(a)});t();h();c()}).always(function(){d.deactivate();g.enable(b)})}})}a("#mobile-reviews .bc-tab-set a.bc-link.bc-tab-heading").click(function(){var a=document.querySelector("#mobile-reviews .bc-tab-content:not(.bc-hidden)");a&&r.init(a)});a(".globalReviewsTabs").click(function(){q.buildAndPost("reviewTab",a(this).attr("id"))});
a(".go-to-reviews").click(function(){a(m).scrollTop(a("#customer-reviews").offset().top-45)});h();c();d();t();(function(){a(".reviewSortOptions").change(function(){var b=a(".globalReviewsTabs").filter("[aria-selected\x3dtrue]").attr("id"),g=a("#reviewsAsin"+b).val(),e=a("#reviewSort"+b).val(),p=a("#reviewFilter"+b).val();a.ajax({url:"/pd/reviews",data:{country:b,asin:g,sort:e,filter:p,page:0}}).done(function(e){a(".listReviewsTab"+b).empty();a(".listReviewsTab"+b).append(e);l.init(document.querySelector(".listReviewsTab"+
b));d();h();c()})})})()});f.when("AudiblejQuery","expanders","refMarkers","reviewValidator","processing","button","modal","ratingStarsInit","ready").execute(function(a,f,k,l,g,n,q){function h(){0===a("#review-q-1 .bc-rating-stars[data-star-count\x3d'0']").length&&(a("#review-q-2").removeClass("bc-color-secondary"),a("#review-q-2 h2").removeClass("bc-color-secondary"),a("#review-title").toggleClass("bc-input-disabled",!1).prop("disabled",!1))}function c(){var a=document.getElementById("preview-button");
d||!t?n.disable(a):n.enable(a)}a(document).on("click","#review-q-1 .bc-rating-stars",h);h();var d=!0,t=!1;a("#review-title").on("input cut paste keyup change",function(){var b=this.value;"function"===typeof b.trim&&(b=b.trim());d=0===b.length;a("#review-q-3").toggleClass("bc-color-secondary",d);a("#review-q-3 h2").toggleClass("bc-color-secondary",d);a("#review-body").toggleClass("bc-input-disabled",d).prop("disabled",d);c()}).change();a("#review-body").on("input cut paste keyup change",function(){var a=
this.value;"function"===typeof a.trim&&(a=a.trim());t=l.validate(a);c()}).change();a("#preview-button").click(function(){if(!a(this).hasClass("bc-button-disabled")){var b=a("#previewMessage"),c=k.build("write_review_preview",this),e=g(document.getElementById("write-review-form"));e.activate();a.ajax({url:"/write-review/preview?ref\x3d"+c,data:a("#writeReviewForm").serialize(),type:"POST",success:function(c){b.addClass("bc-pub-hidden");a("#preview-wrapper").html(c).show();(c=document.getElementById("mobile-preview"))&&
f.init(c);a("#write-review-wrapper").hide();a("#submit-buttons-wrapper").removeClass("bc-pub-hidden")},error:function(){b.removeClass("bc-pub-hidden")},complete:function(){e.deactivate()}})}});a("#edit-review-button").click(function(){a("#submitReviewErrorMessage").addClass("bc-pub-hidden");a("#preview-wrapper").empty().hide();a("#write-review-wrapper").show();a("#submit-buttons-wrapper").addClass("bc-pub-hidden")});a("#submit-review-button").click(function(){var b=a("#submitReviewErrorMessage"),
c=a("input:hidden[name\x3dsource]").val(),e=k.build("review_preview_submit",this),d=g(document.getElementById("write-review-form"));d.activate();a.ajax({url:"/submit-review?ref\x3d"+e,data:a("#writeReviewForm").serialize(),dataType:"json",type:"POST",success:function(e){if(e.success){b.addClass("bc-pub-hidden");e=a("input:hidden[name\x3dasin]").val();var g=a("input:hidden[name\x3dtitle]").val(),h=a("input:hidden[name\x3doverallRating]").val(),f=a("input:hidden[name\x3dperformanceRating]").val(),l=
a("input:hidden[name\x3dstoryRating]").val();if("undefined"!==typeof digitalData.product&&digitalData.product){var k=digitalData.product[0].productInfo;k.productID=e;k.productName=g}else digitalData.product=[{productInfo:{productID:e,productName:g}}];digitalData.Review="overall:"+h+"|performance:"+f+"|story:"+l;"undefined"!==typeof _satellite&&_satellite&&_satellite.track("reviewSubmitted");m.location.href=""===c||null===c?"/":c}else d.deactivate(),b.removeClass("bc-pub-hidden")},error:function(){d.deactivate();
b.removeClass("bc-pub-hidden")}})});a("#delete-confirmed-button").click(function(){var b=a("#deleteReviewErrorMessage"),c=a("input:hidden[name\x3ddeleteSource]").val(),e=k.build("delete_review",this),d=g(document.getElementById("write-review-form"));q.closeCurrentModal();b.addClass("bc-pub-hidden");d.activate();a.ajax({url:"/delete-review?ref\x3d"+e,data:a("#writeReviewForm").serialize(),dataType:"json",success:function(a){a.success?(b.addClass("bc-pub-hidden"),m.location.href=c?c:"/"):(d.deactivate(),
b.removeClass("bc-pub-hidden"))},error:function(){d.deactivate();b.removeClass("bc-pub-hidden")}})})});f.when("AudiblejQuery","toastMessage","ready").execute(function(a,f){(a=a("input[name\x3dtoastMessage]").val())&&f(a)});f.register("reviewValidator",function(){return{validate:function(a){var f=!0;a=a.split(/ +/);if(15>a.length)f=!1;else{for(var k={},l=0,g=0;g<a.length&&(k[a[g]]||(k[a[g]]=!0,l++,7!==l));g++);7>l&&(f=!1)}return f}}})});