(function(d){var f=window.AmazonUIPageJS||window.P,g=f._namespace||f.attributeErrors,c=g?g("AudibleChexCoreAssets",""):f;c.guardFatal?c.guardFatal(d)(c,window):c.execute(function(){d(c,window)})})(function(d,f,g){d.when("AudiblejQuery","ready").register("ajaxInitiator",function(c){function d(a){if("undefined"===typeof a)throw new b("No Data provided for ajax call");if("undefined"===typeof a.operation)throw new b("No method or operation provided in caller data for Ajax call ");if("undefined"===typeof a.targetDiv)throw new b("No target Div provided in caller data for Ajax call ");
if("undefined"===typeof a.url)throw new b("No url provided in caller data for Ajax call "+a.operation);if("undefined"===typeof a.dataType)throw new b("No response format provided in caller data for Ajax call "+a.operation);if("undefined"===typeof a.data)throw new b("No parameters provided in caller data for Ajax call "+a.operation);}function b(a){this.message=a;this.name="AjaxIOException"}return{initiateAjaxCall:function(a,b){try{d(a)}catch(n){console.log(n.message);return}"undefined"!==typeof b&&
"undefined"!==typeof b.preAjaxCallOperations&&b.preAjaxCallOperations(a.targetDiv);c.ajax({url:a.url,type:"POST",async:null!==a.async?a.async:!0,dataType:a.dataType,data:a.data,success:function(c){if("undefined"!==typeof b&&"undefined"!==typeof b.onAjaxSuccess)b.onAjaxSuccess(a.targetDiv,c)},error:function(c){if("undefined"!==typeof b&&"undefined"!==typeof b.onAjaxFailure)b.onAjaxFailure(a.targetDiv,c)},complete:function(c){if("undefined"!==typeof b&&"undefined"!==typeof b.onAjaxComplete)b.onAjaxComplete(a.targetDiv,
c)}})}}});"use strict";d.when("AudiblejQuery","StrictEvents","ready").register("countdownTimer",function(c,d){var b={existingCountDowns:{}},a=new d(["audibleCountdownTimerStarted","audibleCountdownTimerEnded"]);b.on=a.on.bind(a);b.off=a.off.bind(a);b._emit=a.emit.bind(a);var f=function(e,b){var a,d,f,l=c("#"+b);if(l){var h=l.data("includeSeconds")||!1;b=l.data("trimZeros")||!1;d=Math.floor(e/864E5);var m=864E5*d;a=Math.floor((e-m)/36E5);var g=36E5*a;f=0;var k=(e-m-g)/6E4;h?(h=Math.floor(k),f=Math.ceil((e-
m-g-6E4*h)/1E3),60===f&&(h++,f=0)):h=Math.ceil(k);60===h&&(a++,h=0);24===a&&(d++,a=0);e=d;d=h;k=l.data("timeFormat")||"{d}d {h}h {m}m {s}s";m=l.data("timeFormatHms")||"{h}h {m}m {s}s";g=l.data("timeFormatMs")||"{m}m {s}s";h=l.data("timeFormatS")||"{s}s";b&&("0"===e.toString()&&"0"===a.toString()&&"0"===d.toString()?k=h:"0"===e.toString()&&"0"===a.toString()?k=g:"0"===e.toString()&&(k=m));k=k.replace("{d}",e.toString()).replace("{h}",a.toString()).replace("{m}",d.toString()).replace("{s}",f.toString());
l.text(k)}else throw"Timer ID not found: "+b;},n=function(e,c){e in b.existingCountDowns?console.warn("Duplicate Timer ID detected: "+e):function(){b.existingCountDowns[e]={totalCountDown:c,elapsedMillis:0,startingTime:(new Date).getTime()};f(c,e);var d=b.existingCountDowns[e];a.emit("audibleCountdownTimerStarted",e);var g=setInterval(function(){d.elapsedMillis=(new Date).getTime()-d.startingTime;var c=d.totalCountDown-d.elapsedMillis;0>c?(clearInterval(g),f(0,e),delete b.existingCountDowns[e],a.emit("audibleCountdownTimerEnded",
e)):f(c,e)},1E3)}()};b.start=function(){c(".adbl-countdown-timer").length&&c(".adbl-countdown-timer").each(function(){var a=c(this).attr("id");if(null!==a){var b=c(this).data("duration");if(b===g)throw"Timer "+a+" does not specify a duration";n(a,b)}else throw"One or more timers do not have an id";})};b.getRemainingTime=function(a){return a in b.existingCountDowns?(a=b.existingCountDowns[a],a=a.totalCountDown-a.elapsedMillis,0<a?a:0):-1};return b})});
/* ******** */
(function(c){var d=window.AmazonUIPageJS||window.P,b=d._namespace||d.attributeErrors,a=b?b("AudibleAYCLBuyBoxAssets",""):d;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,d,b){c.when("AudiblejQuery","setReviewProductRatings","button","ready").execute(function(a,c,d){a(document).on("click",".adbl-buy-box-add-to-library",function(b){b.preventDefault();d.disable(a(this)[0]);a(this).find(".bc-button-text-inner").html(a("#adbl_web_buybox_adding_to_library").data("value"));
var e=a(this).attr("id");b=a("#csrfToken-"+e).val();a.ajax({url:"/a/pd/addToLibrary",data:{asin:e,csrfToken:b},success:function(b){a("#adbl-member-buy-box-"+e).parent().parent().parent().replaceWith(b);c.setReviewProductRatings(".asinForRatingStars",".adbl-prod-rate-review-bar-group",".adbl-prod-rate-review-bar",".adbl-prod-rate-review-bar-overall",".adbl-prod-rate-review-bar-performance",".adbl-prod-rate-review-bar-story")}});"undefined"!==typeof digitalData.product&&digitalData.product?digitalData.product[0].productInfo.productID=
e:digitalData.product=[{productInfo:{productID:e}}];_satellite.track("addToLibrary")})})});
/* ******** */
(function(g){var n=window.AmazonUIPageJS||window.P,t=n._namespace||n.attributeErrors,a=t?t("AudibleBuyBoxAssets",""):n;a.guardFatal?a.guardFatal(g)(a,window):a.execute(function(){g(a,window)})})(function(g,n,t){g.when("AudiblejQuery","ajaxInitiator","refMarkers","ready").execute(function(a,c,b){function h(a){var c=a.closest(".adblBuyBoxArea").find(".adblBuyBoxAjaxError");c.find(".adblBuyBoxCartErrorAlert").addClass("bc-hidden");c.find(".adblBuyBoxAddToWishlistErrorAlert").addClass("bc-hidden");c.find(".adblBuyBoxRemoveFromWishlistErrorAlert").addClass("bc-hidden");
c.addClass("bc-hidden");a=a.find(".adblAddToCartButton");a.addClass("bc-button-disabled");a.find(".adblAddToCartText").addClass("bc-hidden");a.find(".adblAddingText").removeClass("bc-hidden");a.unbind("click")}function f(k,c){c=k.find(".adblGoToCartButton");k.find(".adblAddToCartButton").addClass("bc-hidden");c.removeClass("bc-hidden");if(d)d.incrementCartCount();else if((k=a("header .bc-icon-cart"))&&1===k.length){c=a("span.cart-num");var b;0===c.length?(b=0,c=a("\x3cspan\x3e"),c.addClass("cart-num"),
k.parent().parent().append(c)):b=parseInt(c.text(),10);c.html(b+1)}}function e(a,c){c=a.closest(".adblBuyBoxArea").find(".adblBuyBoxAjaxError");c.find(".adblBuyBoxCartErrorAlert").removeClass("bc-hidden");c.removeClass("bc-hidden");a=a.find(".adblAddToCartButton");a.click(p);a.find(".adblAddingText").addClass("bc-hidden");a.find(".adblAddToCartText").removeClass("bc-hidden");a.removeClass("bc-button-disabled")}function l(a,c){}function p(k){k=a(k.target).closest(".adblAddToCart");var d={},m={};d.url=
"/cart/add";d.operation="ADD_TO_CART";d.dataType="json";d.targetDiv=k;m.asin=k.find('input[name\x3d"asin"]').val();m.token=k.find('input[name\x3d"token"]').val();m.key=k.find('input[name\x3d"key"]').val();m.tr=k.find('input[name\x3d"tr"]').val();m.ct=k.find('input[name\x3d"ct"]').val();d.data=m;m={};m.preAjaxCallOperations=h;m.onAjaxSuccess=f;m.onAjaxFailure=e;m.onAjaxComplete=l;"undefined"!==typeof _satellite&&_satellite&&_satellite.track("cartAdd");c.initiateAjaxCall(d,m);b.buildAndPost("cartAdd",
k[0]);"undefined"!==typeof digitalData.product&&digitalData.product?digitalData.product[0].productInfo.productID=d.data.asin:digitalData.product=[{productInfo:{productID:d.data.asin}}]}a(".adblAddToCartButton").click(p);a(".adblBuyForButton").click(function(){_satellite.track("cartAdd")});a(".adblBuyForLink").on("click",function(a){a.preventDefault();_satellite.track("cartAdd");this.closest("form").submit()});var d;g.when("headerCart").execute(function(a){d=a})});"use strict";g.when("AudiblejQuery",
"wishlistUtil","ajaxInitiator","refMarkers","ready").execute(function(a,c,b,h){function f(a){c.hideAllErrorMessages(a);a=a.find(".adblAddToWishlistButton, .adblAddToWishlistLink");c.showInterStateText(a,".adblAddingToWishlistText",".adblAddToWishlistText")}function e(a,b){b=a.find(".adblGoToWishlistButton, .adblGoToWishlistLink, .adblRemoveFromWishlistButton, .adblRemoveFromWishlistLink");a=a.find(".adblAddToWishlistButton, .adblAddToWishlistLink");c.changeClickableStateOnSuccess(a,b,".adblRemovingFromWishlistText",
".adblRemoveFromWishlistText")}function l(a,b){c.displayErrorMessageOnFailure(a,".adblBuyBoxAddToWishlistErrorAlert");a=a.find(".adblAddToWishlistButton, .adblAddToWishlistLink");a.click(d);c.changeClickableStateOnFailure(a,".adblAddingToWishlistText",".adblAddToWishlistText")}function p(a,c){}function d(k){var d=a(k.target).closest(".wishlist"),d=c.buildWishlistCaller(d,"/wish-list/add","ADD_TO_WISHLIST"),m=c.buildWishlistCallback(f,e,l,p);"undefined"!==typeof _satellite&&_satellite&&_satellite.track("wishlistAddClick");
b.initiateAjaxCall(d,m);h.buildAndPost("wishlistAddClick",k.target)}a(".adblAddToWishlistButton, .adblAddToWishlistLink").click(d)});"use strict";g.when("AudiblejQuery","wishlistUtil","ajaxInitiator","refMarkers","ready").execute(function(a,c,b,h){function f(a){c.hideAllErrorMessages(a);a=a.find(".adblRemoveFromWishlistButton, .adblRemoveFromWishlistLink");c.showInterStateText(a,".adblRemovingFromWishlistText",".adblRemoveFromWishlistText")}function e(a,b){b=a.find(".adblAddToWishlistButton, .adblAddToWishlistLink");
a=a.find(".adblGoToWishlistButton, .adblGoToWishlistLink, .adblRemoveFromWishlistButton, .adblRemoveFromWishlistLink");c.changeClickableStateOnSuccess(a,b,".adblAddingToWishlistText",".adblAddToWishlistText")}function l(a,b){c.displayErrorMessageOnFailure(a,".adblBuyBoxRemoveFromWishlistErrorAlert");a=a.find(".adblRemoveFromWishlistButton, .adblRemoveFromWishlistLink");a.click(d);c.changeClickableStateOnFailure(a,".adblRemovingFromWishlistText",".adblRemoveFromWishlistText")}function p(a,c){g.now("WishlistAssets").execute(function(a){null!==
a&&a!==t&&a.handleRemoveFromWishlist()})}function d(d){var g=a(d.target).closest(".wishlist"),g=c.buildWishlistCaller(g,"/wish-list/remove","REMOVE_FROM_WISHLIST"),m=c.buildWishlistCallback(f,e,l,p);"undefined"!==typeof _satellite&&_satellite&&_satellite.track("wishlistRemoveClick");b.initiateAjaxCall(g,m);h.buildAndPost("wishlistRemoveClick",d.target)}a(".adblRemoveFromWishlistButton, .adblRemoveFromWishlistLink").click(d)});"use strict";g.when("AudiblejQuery","ready").register("wishlistUtil",function(a){return{buildWishlistCaller:function(a,
b,h){var f={},e={};f.url=b;f.operation=h;f.dataType="json";f.targetDiv=a;e.asin=a.find('input[name\x3d"asin"]').val();e.token=a.find('input[name\x3d"token"]').val();e.key=a.find('input[name\x3d"key"]').val();f.data=e;return f},buildWishlistCallback:function(a,b,h,f){var e={};e.preAjaxCallOperations=a;e.onAjaxSuccess=b;e.onAjaxFailure=h;e.onAjaxComplete=f;return e},hideAllErrorMessages:function(a){a=a.closest(".adblBuyBoxArea").find(".adblBuyBoxAjaxError");a.find(".adblBuyBoxCartErrorAlert").addClass("bc-hidden");
a.find(".adblBuyBoxAddToWishlistErrorAlert").addClass("bc-hidden");a.find(".adblBuyBoxRemoveFromWishlistErrorAlert").addClass("bc-hidden");a.addClass("bc-hidden")},showInterStateText:function(a,b,h){a.addClass("bc-button-disabled");a.find(h).addClass("bc-hidden");a.find(b).removeClass("bc-hidden")},changeClickableStateOnSuccess:function(a,b,h,f){a.addClass("bc-hidden");b.find(h).addClass("bc-hidden");b.find(f).removeClass("bc-hidden");b.removeClass("bc-button-disabled");b.removeClass("bc-hidden")},
displayErrorMessageOnFailure:function(a,b){a=a.closest(".adblBuyBoxArea").find(".adblBuyBoxAjaxError");a.find(b).removeClass("bc-hidden");a.removeClass("bc-hidden")},changeClickableStateOnFailure:function(a,b,h){a.find(b).addClass("bc-hidden");a.find(h).removeClass("bc-hidden");a.removeClass("bc-button-disabled")}}});"use strict";g.when("AudiblejQuery","refMarkers","focus","Spinner","button","modal","ready").execute(function(a,c,b,h,f,e){function l(a){switch(a){case "desktop":a="dt";break;case "mobile":a=
"mb";break;case "tablet":a="tb";break;default:a="tb"}return a}function g(a){return b.change({focusElement:a.find("button:eq(0)").get(0)||a.get(0)})}function d(c){var b=a(c.evt.target).closest(".adblBuyBoxArea"),d=b.find(".adblCalltoActionContainer"),b=b.find(c.id);b.addClass("buyBoxCurrentAction").slideDown(g(b));d.slideUp();"undefined"!==typeof _satellite&&_satellite&&_satellite.track(c.tracker)}function k(b){var c=a(b.evt.target).closest(".adblBuyBoxArea"),d=c.find(".adblCalltoActionContainer");
b=c.find(b.id);d.slideDown(g(d));b.removeClass("buyBoxCurrentAction").slideUp()}function n(a){"undefined"!==typeof digitalData.product&&digitalData.product?digitalData.product[0].productInfo.buyNowType=a:digitalData.product=[{productInfo:{buyNowType:a}}]}function m(a,b){return a.find("button").is(":disabled")?(b.preventDefault(),b.stopPropagation(),!0):!1}function t(d,h,k,g,p){if(m(d,p))return!1;var v=d.get(0),w=v.querySelector(".bc-button-text-inner"),q=w.textContent,u=v.querySelector(".bc-button-text").dataset;
(p=u.loading)?(f.disable(v),w.textContent=p):x(g,d);n(h);c.post(k+l(a(".deviceType").val()));"undefined"!==typeof _satellite&&_satellite&&_satellite.track(h);d=u.showConfirmModal;var r=v.closest("form");p&&(d?function(){var c=document.getElementById("confirm-modal"),d=b.change({focusElement:c.querySelector(b.FOCUSABLE_SELECTOR),isFocusOnLayer:!0});u.modalInit?(e.open(c),d()):function(){var b=function(){f.enable(v);w.textContent=q};a.ajax({url:"/order-lookup/asin",method:"POST",contentType:"application/json",
data:JSON.stringify({asins:[r.elements.asin.value],token:r.elements.token.value,key:r.elements.key.value}),dataType:"json",success:function(a){a.url?(u.modalInit="true",document.getElementById("adbl-review-previous-order-button").querySelector(".bc-button-text").setAttribute("href",a.url),document.getElementById("adbl-place-new-order-button").addEventListener("click",function(){r.submit()}),c.querySelector(".modal-close").addEventListener("click",b),c.addEventListener("click",function(a){a.target.classList.contains("bc-modal-closeable")&&
b()}),e.open(c),d()):r.submit()}}).fail(function(){r.submit()})}()}():r.submit())}function x(a,b){var c=h.DISPLAY_TYPE_DEFAULT;b.closest(".pdp-hero-buy-box").length&&(c=h.DISPLAY_TYPE_TRANSPARENT);(new h(b.closest(a).get(0),c)).start()}a(".adblConfirmCreditPurchase").css("display","none").removeClass("bc-hidden");a(".adblConfirmCashPurchase").css("display","none").removeClass("bc-hidden");a(".adblConfirmEnterprisePurchase").css("display","none").removeClass("bc-hidden");a(".adblBuyNowWithCredit").click(function(b){b=
{evt:b,id:".adblConfirmCreditPurchase",tracker:"buyNowCreditCartAddClick"};c.post("1clk_bb_shw_bn_1crdt_"+l(a(".deviceType").val()));d(b)});a(".adblConfirmCreditCancelButton").click(function(b){k({evt:b,id:".adblConfirmCreditPurchase"});c.post("1clk_bb_cncl_crdt_cnfrm_"+l(a(".deviceType").val()))});a(".adblBuyNowCashButton").click(function(b){b={evt:b,id:".adblConfirmCashPurchase",tracker:"buyNowCashCartAddClick"};c.post("1clk_bb_shw_bn_cash_"+l(a(".deviceType").val()));a("channelLiteProduct").length&&
c.post("1clk_bb_shw_audshw_add2lib4cash_"+l(a(".deviceType").val()));d(b)});a(".adblConfirmCashCancelButton").click(function(b){k({evt:b,id:".adblConfirmCashPurchase"});c.post("1clk_bb_cncl_csh_cnfrm_"+l(a(".deviceType").val()));a("channelLiteProduct").length&&c.post("1clk_bb_cncl_audshw_cnfrm_"+l(a(".deviceType").val()))});a(".enterprisePurchaseButton").click(function(b){b={evt:b,id:".adblConfirmEnterprisePurchase",tracker:"enterpriseAddToLibraryClick"};c.post("1clk_bb_shw_ntprs_purchs_"+l(a(".deviceType").val()));
d(b)});a(".adblConfirmEnterpriseCancelButton").click(function(b){k({evt:b,id:".adblConfirmEnterprisePurchase"});c.post("1clk_bb_cncl_ntprs_cnfrm_"+l(a(".deviceType").val()))});a(".adblConfirmCreditPurchaseButton").click(function(b){t(a(this),"buyNowCreditPurchase","1clk_bb_cnfrm_crdt_purchs_","#adbl-confirm-credit-purchase",b)});a(".adblConfirmCashPurchaseButton").click(function(b){t(a(this),"buyNowCashPurchase","1clk_bb_cnfrm_csh_purchs_","#adbl-confirm-cash-purchase",b);a("channelLiteProduct").length&&
c.post("1clk_bb_cnfm_audshw_purchs_"+l(a(".deviceType").val()))})});"use strict";"use strict";g.when("AudiblejQuery","countdownTimer","ready").register("specialPromoBuyBoxCallBacks",function(a,c){a("#showSpecialPromoTray").length||c.start();return{addToSpecialPromoTrayCallBack:function(b){var c=b.next(".spActionData").data("asin");b.addClass("bc-pub-hidden");a(".sp-in-selection-"+c).removeClass("bc-pub-hidden");a(".sp-add-to-selection-"+c).addClass("bc-pub-hidden")},removeFromSpecialPromoTrayCallBack:function(b){b=
b.next(".spActionData").data("asin");a('.addToSpecialPromoTrayBtn button[data-asin\x3d"'+b+'"]').parent(".addToSpecialPromoTrayBtn").removeClass("bc-pub-hidden");a(".sp-in-selection-"+b).addClass("bc-pub-hidden");a(".sp-add-to-selection-"+b).removeClass("bc-pub-hidden")}}});"use strict";g.when("AudiblejQuery","cloudPlayerLauncher","ready").execute(function(a,c){a(document).on("click",".adblBuyBoxListenNow",function(b){b.preventDefault();b=a(this).children(".bc-button-text").attr("asin");null!==b&&
b!==t&&c.openCloudPlayer(b,"a_ownedbuybox_cloudplayer")})});"use strict";g.when("AudiblejQuery","geoRights","paymentsWidget","issuerIconUtility").execute(function(a,c,b,h){function f(b){if("undefined"===typeof b||null===b)a("#adbl-payment-instrument-details").addClass("bc-hidden"),a("#adbl-payment-invalid-instr-error").addClass("bc-hidden"),a("#adbl-payment-geoblocked-instr-error").addClass("bc-hidden"),a("#adbl-payment-noInstr-error").removeClass("bc-hidden"),a(".adblConfirmCashPurchaseButton").hasClass("bc-button-disabled")||
(a("#adbl-confirm-cash-purchase-form").find('input[name\x3d"paymentId"]').val(""),g());else{var k=a("#adbl-confirm-cash-purchase-form");k.find('input[name\x3d"paymentId"]').val();var f=b.paymentId;b.isValid?c.validateGeoRights(k,b.billingAddressId).then(function(c){if(c){c=b.paymentId;var k=a("#adbl-payment-instrument-details").find(".buy-box-issuer-icon");h.updateImage(k.get(0),b);a("#adbl-payment-instrument-details").find(".adblCCTail").html(b.tail);a("#adbl-confirm-cash-purchase-form").find('input[name\x3d"paymentId"]').val(c);
a("#adbl-payment-instrument-details").removeClass("bc-hidden");a("#adbl-payment-invalid-instr-error").addClass("bc-hidden");a("#adbl-payment-noInstr-error").addClass("bc-hidden");a("#adbl-payment-geoblocked-instr-error").addClass("bc-hidden");a(".adblConfirmCashPurchaseButton").hasClass("bc-button-disabled")&&l()}else e(b)},function(){e(b)}):(a("#adbl-payment-instrument-details").addClass("bc-hidden"),a("#adbl-payment-noInstr-error").addClass("bc-hidden"),a("#adbl-payment-geoblocked-instr-error").addClass("bc-hidden"),
a("#adbl-payment-invalid-instr-error").removeClass("bc-hidden"),a(".adblConfirmCashPurchaseButton").hasClass("bc-button-disabled")||g(),a("#adbl-confirm-cash-purchase-form").find('input[name\x3d"paymentId"]').val(f))}}function e(b){b=b.paymentId;a("#adbl-payment-instrument-details").addClass("bc-hidden");a("#adbl-payment-noInstr-error").addClass("bc-hidden");a("#adbl-payment-invalid-instr-error").addClass("bc-hidden");a("#adbl-payment-geoblocked-instr-error").removeClass("bc-hidden");a(".adblConfirmCashPurchaseButton").hasClass("bc-button-disabled")||
(a("#adbl-confirm-cash-purchase-form").find('input[name\x3d"paymentId"]').val(b),g())}function l(){a(".adblConfirmCashPurchaseButton").removeClass("bc-button-disabled");a(".adblConfirmCashPurchaseButton").find("button").prop("disabled",!1)}function g(){a(".adblConfirmCashPurchaseButton").addClass("bc-button-disabled");a(".adblConfirmCashPurchaseButton").find("button").prop("disabled",!0)}a(".changePaymentInstr").click(function(a){a.preventDefault();b.openPaymentsWidgetView(b.PAYMENTS_LIST_VIEW_NAME)});
a(".addnewAddress").click(function(a){a.preventDefault();b.openPaymentsWidgetView(b.ADD_ADDRESS_VIEW_NAME)});b.on("addAddress",function(b,e){if("undefined"!==typeof e&&null!==e&&!1!==e.success){var h=e.addressId;if("undefined"===typeof h||null===h)return null;var f=a(".buyBoxCurrentAction #adbl-address-error");c.validateGeoRights(f,h).then(function(b){b?(f.addClass("bc-hidden"),a(".adblConfirmCashPurchaseButton").hasClass("bc-button-disabled")&&l(),a(".adblConfirmCreditPurchaseButton").hasClass("bc-button-disabled")&&
(a(".adblConfirmCreditPurchaseButton").removeClass("bc-button-disabled"),a(".adblConfirmCreditPurchaseButton").find("button").prop("disabled",!1)),a("#adbl-confirm-credit-purchase-form").find('input[name\x3d"addressId"]').val(h),a("#adbl-confirm-cash-purchase-form").find('input[name\x3d"addressId"]').val(h)):n.location.reload()},function(){n.location.reload()})}});b.on("confirmSelectedPayment",function(a,b){"undefined"!==typeof b&&null!==b&&f(b.paymentInstrument)});b.on("addPayment",function(a,c){"undefined"!==
typeof c&&null!==c&&c.success&&b.isPaymentsWidgetDialogOpen()&&f(c.paymentInstrument)})});"use strict";g.when("AudiblejQuery","ajaxInitiator","ready").register("geoRights",function(a,c){function b(b){return new Promise(function(c,e){a.ajax({url:b.url,type:"POST",async:!0,dataType:b.dataType,data:b.data}).done(function(a){c(a.success)}).fail(function(a){e(!1)})})}return{validateGeoRights:function(a,c){var e={},l={};e.url="/a/buy-box/validate";e.operation="VALIDATE_GEO_RIGHTS";e.dataType="json";e.targetDiv=
a;a=a.parent().find("form");l.asin=a.find('input[name\x3d"asin"]').val();l.asin&&0!==l.asin.length||(l.asin=a.find('input[name\x3d"giftAsin"]').val());l.token=a.find('input[name\x3d"token"]').val();l.key=a.find('input[name\x3d"key"]').val();l.billingAddressId=c;e.data=l;return b(e)}}});"use strict";g.when("AudiblejQuery","setReviewProductRatings","ready").execute(function(a,c){c.setReviewProductRatings(".asin-for-rating-stars",".ratings-csrf-token",".adbl-prod-rate-review-bar-group",".adbl-prod-rate-review-bar",
".adbl-prod-rate-review-bar-overall",".adbl-prod-rate-review-bar-performance",".adbl-prod-rate-review-bar-story")});"use strict";g.when("AudiblejQuery","button","refMarkers","ready").execute(function(a,c,b){function h(){a(".return-book-button").each(function(){c.disable(this)})}function f(){a(".romance-add-to-library-button").each(function(){c.disable(this)})}function e(){a(".romance-add-to-library-button").each(function(){c.enable(this)})}function l(b){0===a("#return-flow-view").length&&(a("body").append(b),
C&&C(document.getElementById("return-flow-view")),a(".return-book-button").on("click",F),a("#cancel-return-flow-button").click(k));y();p();a("#return-form, input[type\x3dradio]").attr("checked",!1)}function p(){a("#return-form, input:checked").change(function(){a(".return-book-button").each(function(){c.enable(this)})})}function d(){z();e()}function k(d){a(".return-book-button").each(function(){c.disable(this)});if(q)q.onReturnFlowPresented(u.CANCELLED,"","",-1);y();e();b.buildAndPost("returnflowCancelClick",
d.target)}function F(c){if(!a(".return-book-button").hasClass("bc-button-disabled")){A(a("#return-flow-view-alert"));h();var e=a("input[name\x3daudiobook]:checked").val();if(null!==e){b.buildAndPost("returnflowReturnBookClick",c.target);c=a("#order-num-"+e).val();var d=a("#hmac-"+e).val();m(e,c,d)}}}function m(b,c,d){c={orderNum:c,hmac:d};var f=(new Date).getTime();a.ajax({url:D(b,c),type:"DELETE",dataType:"json",success:function(){G(b,f)},error:function(){var c=(new Date).getTime()-f;if(q)q.onReturnFlowPresented(u.FAILED,
b,"",c);a("#return-flow-view-alert").removeClass("bc-hidden");e()}})}function G(b,c){var d=a("#book-to-add").val(),f=a("#book-to-add-hmac").val();x(d,f,"adbl_rom_ar_rf_atl",function(){var a=(new Date).getTime()-c;if(q)q.onReturnFlowPresented(u.SUCCESS,b,d,a);y();E()},function(f){f=f.responseJSON;if(f!==t&&!0===f.limit_reached)a("input[value\x3d"+b+"]").closest("li").remove();else{f=(new Date).getTime()-c;if(q)q.onReturnFlowPresented(u.FAILED,b,d,f);z();e()}})}function x(b,c,e,d,f){a.ajax({url:D(b,
{hmac:c,ref:e}),type:"POST",dataType:"json",success:d,error:f})}function D(b,c){if(null===c||c===t)c={};c=a.param(c);return["/library/audiobook/"+b,c].join("?")}function y(){B.toggle(document.getElementById("return-flow-view"))}function z(){r.find(".adblBuyBoxRomanceAYCLErrorAlert").removeClass("bc-hidden");r.removeClass("bc-hidden")}function A(a){a.addClass("bc-hidden")}function E(){var a=v("getAppModalWidgetType"),b=n.location,c=n.location.href.replace(n.location.search,""),e="?";a.getAppModalWidgetType=
"ROMANCE";for(var d in a)a.hasOwnProperty(d)&&(e+=d+"\x3d"+a[d]+"\x26");b.href=c+e}function v(a){var b={};n.location.search.slice(1).split("\x26").map(function(a){return a.split("\x3d")}).reduce(function(b,c){var e=c[0];c=c[1];e&&0!==e.length&&e!==a&&(b[decodeURIComponent(e)]=decodeURIComponent(c));return b},b);return b}var w=["MobileJavaScriptBridge","AndroidJavaScriptBridge"],q=function(){for(var a=0;a<w.length;++a){var b=w[a];if("undefined"!==typeof n[b]&&n[b])return n[b]}return null}(),u={SUCCESS:"SUCCESS",
FAILED:"FAILURE",CANCELLED:"CANCEL"},r=null,B=null,C=null;g.when("tray","mobile").execute(function(a){B=a;C=a.init});g.when("modal","desktop").execute(function(a){B=a});a(".romance-add-to-library-button").click(function(c){f();var h=c.target,g=a(a(h).closest("div[name\x3d'romance-add-to-library-form']")),k=g.find("input[name\x3d'asin']").val(),m=g.find("input[name\x3d'token']").val(),g=g.find("input[name\x3d'ref']").val(),p=(new Date).getTime();r=a(h).closest(".adblMemberBuyBox").find(".adblBuyBoxAjaxError");
A(r.find(".adblBuyBoxRomanceAYCLErrorAlert"));A(r);x(k,m,g,function(){var a=(new Date).getTime()-p;if(q)q.onAddToLibrary(u.SUCCESS,k,a);E()},function(f){var g=k;f=f.responseJSON;if(f!==t&&!0===f.limit_reached)g=f.asin,a.ajax({url:"/aycl-return-flow?asin\x3d"+g,type:"GET",success:l,error:d}),b.buildAndPost("returnflowLaunched",c.target);else{z();f=(new Date).getTime()-p;if(q)q.onAddToLibrary(u.FAILED,g,f);e()}})});h()});"use strict";g.when("AudiblejQuery","countdownTimer").execute(function(a,c){function b(a){a.closest(".adblBuyBoxContainer").find(".adblBuyNowCashButton, .adblBuyNowWithCredit").off("click").on("click",
function(){var a=g();a.cic="se";a.ref="a_bb_cic_se";var b=n.location.href.replace(n.location.search,""),c="?",d;for(d in a)a.hasOwnProperty(d)&&(c+=d+"\x3d"+a[d]+"\x26");n.location.href=b+c})}function g(){var a={};n.location.search.slice(1).split("\x26").map(function(a){return a.split("\x3d")}).reduce(function(a,b){var c=b[0];b=b[1];c&&0!==c.length&&(a[decodeURIComponent(c)]=decodeURIComponent(b));return a},a);return a}c.start();c.on("audibleCountdownTimerEnded",function(c,e){c=a("#"+e);c.hide();
e=c.closest(".adblSaleTimerContainer");e.find(".adblSaleHasEnded").show();e.find(".adblSaleEndsIn").hide();b(c)})})});
/* ******** */
